# 阶段2验收清单（Trip-Camp）

说明：

- 本清单用于验收 **阶段 2（用户端可见：酒店查询/列表/详情）** 的交付结果。
- 后端 Base URL：`http://localhost:3000`
- API 前缀：`/api/v1`
- Hotels 接口：`/api/v1/hotels*`

---

## 0. 启动检查

- [x] 后端 `server/` 可启动，且 `GET http://localhost:3000/health` 返回 `{ ok: true }`
- [ ] 移动端 `apps/mobile/` 可启动并打开页面（H5 或小程序其一即可）
- [x] 管理端 `apps/admin/` 可启动并打开页面（仅保证阶段 1 不回归）

---

## 1. 后端（A）阶段2：Hotels 接口验收（Apifox 或 curl 均可）

阶段 2 核心验收：用户端只看到 **已审核通过且已上线** 的酒店数据。

### 1.1 酒店列表（GET /hotels）

基础可用：

- [x] `GET /api/v1/hotels` 返回 `200` 且为列表数据
- [x] 列表项包含移动端渲染必需字段（至少：`id`、酒店名、城市或地址摘要、图片/封面、星级或价格任一）

分页：

- [x] `page`/`pageSize` 生效：`page=1&pageSize=10` 与 `page=2&pageSize=10` 返回不同数据（或能证明分页游标/分页信息生效）
- [x] 参数边界校验合理（例如非数字/过大 pageSize 不会导致服务崩溃）

查询参数（至少验收 2 项）：

- [x] `city` 筛选生效
- [x] `keyword` 模糊查询生效（酒店名/地址其一字段命中即可）
- [x] `tags` 筛选生效（如果设计为数组/逗号分隔，需与后端约定一致）
- [x] `checkIn`/`checkOut` 参数可透传（阶段 2 可先不做库存校验，但接口应能稳定处理）

排序（至少验收 1 种）：

- [x] `sort` 生效（例如价格升序/降序或星级排序，需与后端约定一致）

可见性规则（必须）：

- [x] 仅返回 `auditStatus=approved` 且 `onlineStatus=online` 且未删除的酒店

### 1.2 酒店详情（GET /hotels/:id）

基础可用：

- [x] 从列表取一个 `id`，`GET /api/v1/hotels/:id` 返回 `200`
- [x] 返回包含轮播图字段（例如 `images` 或 `cover + images`，至少能支撑 2 张图轮播）
- [x] 返回包含房型列表字段（至少能展示 `name` 与 `price`）

错误用例：

- [x] `id` 不存在：返回 `404`（或你们约定的错误结构/错误码）

---

## 2. 移动端（B）阶段2：查询 → 列表 → 详情闭环验收点

说明：移动端阶段 2 验收 **数据必须来自后端接口**，不允许本地 mock 接口替代。

### 2.1 首页（查询页）

- [ ] 首页包含 Banner，点击可进入某酒店详情页（可以用后端返回的酒店）
- [ ] 查询条件可填写并能跳转到列表页（至少支持：城市/关键词/日期任一组合）

### 2.2 列表页（GET /hotels）

- [ ] 列表请求命中 `/api/v1/hotels`（Network 可见，且参数与页面条件一致）
- [ ] 列表展示关键字段（至少：酒店名 + 价格/星级 + 图片/封面 任两项）
- [ ] 支持分页上拉加载，且至少能加载到第 2 页
- [ ] （可选加分）列表支持排序/筛选，并能影响请求参数与展示结果

### 2.3 详情页（GET /hotels/:id）

- [ ] 详情请求命中 `/api/v1/hotels/:id`
- [ ] 顶部大图轮播可用（至少 2 张时可滑动/切换）
- [ ] 展示酒店基础信息（酒店名 + 星级/设施/地址 任两项）
- [ ] 房型列表按价格从低到高展示（或能证明与后端 `sort` 约定一致）

验收截图建议：

- [ ] 首页填写查询条件 + 点击查询的截图
- [ ] 列表分页加载到第 2 页的截图
- [ ] 详情页轮播 + 房型列表/价格排序的截图

---

## 3. 管理端（C）阶段2：不回归 + 占位入口

说明：阶段 2 的必做重心在用户端可见数据；管理端此阶段以“不回归 + 为阶段 3 铺路”的占位为主。

- [x] 阶段 1 登录/注册/me/角色菜单不回归
- [x] merchant 登录后只显示商户入口；admin 登录后只显示管理员入口
- [x] 商户页/管理员页有阶段 3 功能入口占位信息（酒店录入/编辑/提交审核；审核/发布/下线列表）

---

## 4. 阶段2交付物（用于答辩/评分）

- [ ] Apifox：`GET /hotels`（含分页/筛选/排序任一）成功截图
- [ ] Apifox：`GET /hotels/:id` 详情成功截图（包含图片字段与房型/价格字段）
- [ ] 移动端：首页 → 列表 → 详情的闭环截图/录屏（包含分页与轮播/房型展示）
