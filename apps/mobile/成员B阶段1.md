# æºç¨‹è®­ç»ƒè¥ - ç§»åŠ¨ç«¯ (Phase 1)

æœ¬é¡¹ç›®æ˜¯æºç¨‹è®­ç»ƒè¥çš„ç§»åŠ¨ç«¯éƒ¨åˆ†ï¼ŒåŸºäº **Taro + React** å¼€å‘ã€‚
é˜¶æ®µ 1 ä¸»è¦å®Œæˆäº†åŸºç¡€æ¶æ„æ­å»ºã€è¯·æ±‚å°è£…ä»¥åŠç”¨æˆ·ç™»å½•æ€çš„é—­ç¯å®ç°ã€‚

## ğŸ› ï¸ æŠ€æœ¯æ ˆ
- **æ¡†æ¶**: Taro v4 (React)
- **UI ç»„ä»¶**: @tarojs/components
- **æ ·å¼**: SCSS (Sass)
- **æ„å»ºç›®æ ‡**: H5 (Web) / å¾®ä¿¡å°ç¨‹åº

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–
åœ¨ `apps/mobile` ç›®å½•ä¸‹æ‰§è¡Œï¼š
```bash
npm install
```

### 2. å¯åŠ¨å¼€å‘æœåŠ¡ (H5)
```bash
npm run dev:h5
```
å¯åŠ¨æˆåŠŸåï¼Œæµè§ˆå™¨è®¿é—® `http://localhost:10086/`ã€‚

> æ³¨æ„ï¼šéœ€è¦å…ˆå¯åŠ¨åç«¯æœåŠ¡ (`server` ç›®å½• `npm run dev`) æ‰èƒ½æ­£å¸¸è¿›è¡Œç™»å½•äº¤äº’ã€‚

## ğŸ“ é˜¶æ®µ 1 åŠŸèƒ½è¯´æ˜

### 1. ç»Ÿä¸€è¯·æ±‚å°è£… (`utils/request.js`)
- **BaseURL**: é»˜è®¤æŒ‡å‘ `http://localhost:3000/api/v1`ã€‚
- **è‡ªåŠ¨é‰´æƒ**: æ¯æ¬¡è¯·æ±‚è‡ªåŠ¨ä» `Taro.getStorageSync('token')` è¯»å– Token å¹¶æ·»åŠ åˆ° Header (`Authorization: Bearer ...`)ã€‚
- **å…¨å±€é”™è¯¯å¤„ç†**: æ‹¦æˆªé 2xx å“åº”ï¼Œè‡ªåŠ¨å¼¹å‡º Toast æç¤ºé”™è¯¯ä¿¡æ¯ã€‚

### 2. ç™»å½•æµç¨‹ (`pages/login`)
- **API**: è°ƒç”¨ `POST /auth/login`ã€‚
- **Token å­˜å‚¨**: ç™»å½•æˆåŠŸåå°† Token å­˜å…¥æœ¬åœ° Storageã€‚
- **é¡µé¢è·³è½¬**: æˆåŠŸåè‡ªåŠ¨è·³è½¬è‡³é¦–é¡µ (`redirectTo`)ã€‚

### 3. ç™»å½•æ€éªŒè¯ (`pages/home`)
- **Check Login State**: é¦–é¡µæä¾›æŒ‰é’®è°ƒç”¨ `GET /auth/me`ã€‚
    - **æˆåŠŸ**: å±•ç¤ºç”¨æˆ·ä¿¡æ¯ (Username / Role)ã€‚
    - **å¤±è´¥ (401)**: æç¤º "è¯·å…ˆç™»å½•" å¹¶è·³è½¬è‡³ç™»å½•é¡µã€‚
- **Logout**: æ¸…é™¤æœ¬åœ° Token å¹¶é‡ç½®ç”¨æˆ·ä¿¡æ¯ã€‚

## ğŸ“‚ ç›®å½•ç»“æ„ (éƒ¨åˆ†)
```
apps/mobile/src
â”œâ”€â”€ pages
â”‚   â”œâ”€â”€ home/           # é¦–é¡µ (å«ç™»å½•æ€æ£€æŸ¥)
â”‚   â”œâ”€â”€ login/          # ç™»å½•é¡µ
â”‚   â””â”€â”€ list/           # åˆ—è¡¨é¡µ (å ä½)
â”œâ”€â”€ utils
â”‚   â””â”€â”€ request.js      # è¯·æ±‚å°è£…æ ¸å¿ƒ
â”œâ”€â”€ app.config.js       # å…¨å±€é…ç½® (è·¯ç”±ç­‰)
â””â”€â”€ app.js              # å…¥å£æ–‡ä»¶
```
