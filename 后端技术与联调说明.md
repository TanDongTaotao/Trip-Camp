# 后端技术与联调说明（给成员 B / C）

本项目后端由成员 A 维护，供用户端（Taro）与管理端（React+AntD）联调使用。

## 1. 技术栈与开发方式

- 语言：JavaScript（Node.js）
- 框架：Express
- 数据库：MongoDB Atlas（云数据库）
- 鉴权：JWT（Bearer Token）
- 开发方式：nodemon（代码变更自动重启服务）

## 2. 本地联调地址（开发期）

- 后端服务地址（Base URL）：`http://localhost:3000/api/v1`
- 例子：
  - 登录：`POST http://localhost:3000/api/v1/auth/login`
  - 酒店列表：`GET http://localhost:3000/api/v1/hotels`

## 3. 接口文档

- OpenAPI（可导入 Apifox）：[apifox-openapi.yaml](file:///Trip-Camp/apifox-openapi.yaml)
- 接口说明（状态流/错误码/落地顺序）：[接口注释说明文档.txt](file:/Trip-Camp/接口注释说明文档.txt)

## 4. 你们前端要怎么接

### 4.1 token 怎么用

- `POST /auth/login` 或 `POST /auth/register` 成功后会返回 `token`
- 后续请求统一带请求头：
  - `Authorization: Bearer <token>`

建议：
- Taro（B）：token 放 storage
- 管理端（C）：token 放 localStorage/sessionStorage

### 4.2 角色怎么判断（管理端需要）

- 管理端登录后调用 `GET /auth/me`
- 根据返回的 `user.role` 决定显示“商户”或“管理员”的菜单/页面

## 5. 与后端联调的最小流程

1) Apifox 或前端先调通：
- `POST /auth/register`
- `POST /auth/login`
- `GET /auth/me`

2) 再开始对接业务：
- 用户端：`GET /hotels`、`GET /hotels/:id`
- 管理端（商户）：`/merchant/hotels*`
- 管理端（管理员）：`/admin/hotels*`

